<div class="search-results-page" fxLayout="column" fxLayoutAlign="start center">
  <div class="search-box-wrapper">
    <app-search-bar></app-search-bar>
  </div>
  <div class="main-wrapper" fxLayout="row" fxLayoutAlign="space-around start">
    <div
      class="filters-wrapper"
      fxLayout="column"
      fxLayoutAlign="start start"
      fxFlex="22"
    >
      <mat-card class="full-width">
        <mat-card-title>
          <h2>{{ 'Filters' }}</h2>
        </mat-card-title>
        <mat-accordion [multi]="true" class="full-width">
          <mat-expansion-panel
            [expanded]="true"
            *ngFor="let filtersGroup of searchFilters"
          >
            <mat-expansion-panel-header>
              <mat-panel-title> {{ filtersGroup.name }} </mat-panel-title>
            </mat-expansion-panel-header>
            <section>
              <div
                *ngIf="
                  filtersGroup.type === searchFilterTypeEnum.CHECKBOX_ALL ||
                  filtersGroup.type === searchFilterTypeEnum.CHECKBOX
                "
              >
                <span>
                  <mat-checkbox
                    [checked]="filtersGroup.checked!"
                    [color]="filtersGroup.color"
                    [indeterminate]="someComplete(filtersGroup)"
                    (change)="setAll(filtersGroup, $event.checked)"
                  >
                    {{ 'All' }}
                    <!-- {{ 'All' + ' - ' + filtersGroup.description }} -->
                  </mat-checkbox>
                </span>
                <span>
                  <ul>
                    <li *ngFor="let innerFilter of filtersGroup.subFilters">
                      <mat-checkbox
                        [(ngModel)]="innerFilter.checked"
                        [color]="innerFilter.color"
                        (ngModelChange)="updateAllComplete(filtersGroup)"
                      >
                        {{ innerFilter.name }}
                        <!-- {{ innerFilter.name + ' - ' + innerFilter.description }} -->
                      </mat-checkbox>
                    </li>
                  </ul>
                </span>
              </div>
              <div *ngIf="filtersGroup.type === searchFilterTypeEnum.INTERVAL">
                <span>
                  <ul>
                    <li
                      *ngFor="let innerFilter of filtersGroup.subFilters"
                      class="custom-slider"
                    >
                      <ngx-slider
                        [value]="asIntervalSearchFilter(innerFilter).lowValue"
                        [highValue]="
                          asIntervalSearchFilter(innerFilter).highValue
                        "
                        [options]="{
                          floor: asIntervalSearchFilter(innerFilter).lowerBound,
                          ceil: asIntervalSearchFilter(innerFilter).upperBound,
                          showTicks: true,
                          noSwitching: true
                        }"
                      ></ngx-slider>
                    </li>
                  </ul>
                </span>
              </div>
            </section>
          </mat-expansion-panel>
        </mat-accordion>
      </mat-card>
    </div>
    <div
      class="results-wrapper"
      fxLayout="column"
      fxLayoutAlign="start start"
      fxFlex="75"
    >
      <mat-accordion [multi]="true" class="full-width">
        <mat-expansion-panel [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title> <h2>Courses</h2> </mat-panel-title>
            <mat-panel-description> Results for courses </mat-panel-description>
          </mat-expansion-panel-header>
          <div
            class="full-width full-height"
            *ngIf="searchResults && searchResults?.videos?.length"
          >
            <div
              class="result-card-wrapper"
              *ngFor="let course of searchResults?.courses"
            >
              <app-result-card [course]="course"></app-result-card>
            </div>
          </div>
          <div
            class="full-width full-height"
            f
            *ngIf="
              !searchResults ||
              !searchResults?.videos ||
              !searchResults?.videos?.length
            "
          >
            <h3>No results... Try searching for something else.</h3>
          </div>
        </mat-expansion-panel>
        <mat-expansion-panel [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title> <h2>Videos</h2> </mat-panel-title>
            <mat-panel-description> Results for videos </mat-panel-description>
          </mat-expansion-panel-header>
          <div
            class="full-width full-height"
            *ngIf="searchResults && searchResults?.videos?.length"
          >
            <div
              class="result-card-wrapper"
              *ngFor="let video of searchResults?.videos"
            >
              <app-result-card [video]="video"></app-result-card>
            </div>
          </div>
          <div
            class="full-width full-height"
            *ngIf="
              !searchResults ||
              !searchResults?.videos ||
              !searchResults?.videos?.length
            "
          >
            <h3>No results... Try searching for something else.</h3>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
      <mat-paginator
        [length]="5"
        [pageSize]="5"
        [pageSizeOptions]="[5, 10, 25, 100]"
        aria-label="Select page"
        class="full-width"
      >
      </mat-paginator>
    </div>
  </div>
</div>
